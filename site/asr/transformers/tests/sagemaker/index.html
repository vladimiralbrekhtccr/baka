
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Testing new Hugging Face Deep Learning Container. - Ohayou</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#testing-new-hugging-face-deep-learning-container" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Ohayou" class="md-header__button md-logo" aria-label="Ohayou" data-md-component="logo">
      
  <img src="../../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ohayou
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Testing new Hugging Face Deep Learning Container.
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../ohayou/" class="md-tabs__link">
        
  
  
    
  
  Ohayou

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../vllm/open_ai_vllm_example_a_v_t/" class="md-tabs__link">
          
  
  
    
  
  vLLM

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../llm/speculative_decoding/" class="md-tabs__link">
          
  
  
    
  
  LLM

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../vlm/qwen3_vl_4B_object_detection/" class="md-tabs__link">
          
  
  
    
  
  VLM

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../md_format_helpers/" class="md-tabs__link">
        
  
  
    
  
  MD format helpers

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../docker/" class="md-tabs__link">
        
  
  
    
  
  Docker

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../linux/" class="md-tabs__link">
        
  
  
    
  
  Linux

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../moe/" class="md-tabs__link">
        
  
  
    
  
  Mixture of Experts

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../slurm/" class="md-tabs__link">
        
  
  
    
  
  Slurm

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../japanese-phrases/" class="md-tabs__link">
          
  
  
    
  
  Japanese Phrases

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../hackathon/index.md" class="md-tabs__link">
        
  
  
    
  
  Hack

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Ohayou" class="md-nav__button md-logo" aria-label="Ohayou" data-md-component="logo">
      
  <img src="../../../../assets/logo.png" alt="logo">

    </a>
    Ohayou
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ohayou/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ohayou
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    vLLM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            vLLM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../vllm/open_ai_vllm_example_a_v_t/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Single Request
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../vllm/bash_vllm_serve/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bash online serve
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../vllm/benchmarks/performance_eval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benchmarks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LLM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            LLM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../llm/speculative_decoding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Speculative Decoding
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    VLM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            VLM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../vlm/qwen3_vl_4B_object_detection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qwen3VL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../md_format_helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MD format helpers
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../moe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mixture of Experts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../slurm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Slurm
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../japanese-phrases/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Japanese Phrases
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11" id="__nav_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Japanese Phrases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../japanese-phrases/daily-life/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Daily Life
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11_2" id="__nav_11_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_2">
            <span class="md-nav__icon md-icon"></span>
            Daily Life
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../japanese-phrases/daily-life/shopping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shopping
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../japanese-phrases/greetings/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Greetings
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11_3" id="__nav_11_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_3">
            <span class="md-nav__icon md-icon"></span>
            Greetings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../japanese-phrases/greetings/casual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Casual
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../japanese-phrases/emotions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emotions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../japanese-phrases/anime-manga/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Anime/Manga
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../hackathon/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hack
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#test-case-1-releasing-a-new-version-minormajor-of-transformers" class="md-nav__link">
    <span class="md-ellipsis">
      Test Case 1: Releasing a New Version (Minor/Major) of ðŸ¤— Transformers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test Case 1: Releasing a New Version (Minor/Major) of ðŸ¤— Transformers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements-test-should-run-on-release-candidate-for-new-transformers-release-to-validate-the-new-release-is-compatible-with-the-dlcs-to-run-these-tests-you-need-credentials-for-the-hf-sagemaker-aws-account-you-can-ask-philschmid-or-n1t0-to-get-access" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements: Test should run on Release Candidate for new transformers release to validate the new release is compatible with the DLCs. To run these tests you need credentials for the HF SageMaker AWS Account. You can ask @philschmid or @n1t0 to get access.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Run Tests:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-transformers-release" class="md-nav__link">
    <span class="md-ellipsis">
      After Transformers Release:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-case-2-releasing-a-new-aws-framework-dlc" class="md-nav__link">
    <span class="md-ellipsis">
      Test Case 2: Releasing a New AWS Framework DLC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execute-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Execute Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Execute Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-tests_1" class="md-nav__link">
    <span class="md-ellipsis">
      Run Tests:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-successful-tests" class="md-nav__link">
    <span class="md-ellipsis">
      After successful Tests:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#current-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Current Tests
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="testing-new-hugging-face-deep-learning-container">Testing new Hugging Face Deep Learning Container.</h1>
<p>This document explains the testing strategy for releasing the new Hugging Face Deep Learning Container. AWS maintains 14 days of currency with framework releases. Besides framework releases, AWS release train is bi-weekly on Monday. Code cutoff date for any changes is the Wednesday before release-Monday. </p>
<h2 id="test-case-1-releasing-a-new-version-minormajor-of-transformers">Test Case 1: Releasing a New Version (Minor/Major) of ðŸ¤— Transformers</h2>
<h3 id="requirements-test-should-run-on-release-candidate-for-new-transformers-release-to-validate-the-new-release-is-compatible-with-the-dlcs-to-run-these-tests-you-need-credentials-for-the-hf-sagemaker-aws-account-you-can-ask-philschmid-or-n1t0-to-get-access">Requirements: Test should run on Release Candidate for new <code>transformers</code> release to validate the new release is compatible with the DLCs. To run these tests you need credentials for the HF SageMaker AWS Account. You can ask @philschmid or @n1t0 to get access.</h3>
<h3 id="run-tests">Run Tests:</h3>
<p>Before we can run the tests we need to adjust the <code>requirements.txt</code> for PyTorch. We adjust the branch to the new RC-tag.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>git+https://github.com/huggingface/transformers.git@v4.5.0.rc0<span class="w"> </span><span class="c1"># install main or adjust it with vX.X.X for installing version specific-transforms</span>
</span></code></pre></div>
<p>After we adjusted the <code>requirements.txt</code> we can run Amazon SageMaker tests with:  </p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">AWS_PROFILE</span><span class="o">=</span>&lt;enter-your-profile&gt;<span class="w"> </span>make<span class="w"> </span>test-sagemaker
</span></code></pre></div>
These tests take around 10-15 minutes to finish. Preferably make a screenshot of the successfully ran tests.</p>
<h3 id="after-transformers-release">After Transformers Release:</h3>
<p>After we have released the Release Candidate we need to create a PR at the <a href="https://github.com/aws/deep-learning-containers">Deep Learning Container Repository</a>.</p>
<p><strong>Creating the update PR:</strong></p>
<ol>
<li>Update the latest <code>buildspec.yaml</code> config for <a href="https://github.com/aws/deep-learning-containers/tree/master/huggingface/pytorch">PyTorch</a>. The two latest <code>buildspec.yaml</code> are the <code>buildspec.yaml</code> without a version tag and the one with the highest framework version, e.g. <code>buildspec-1-7-1.yml</code> and not <code>buildspec-1-6.yml</code>.</li>
</ol>
<p>To update the <code>buildspec.yaml</code> we need to adjust either the <code>transformers_version</code> or the <code>datasets_version</code> or both. Example for upgrading to <code>transformers 4.5.0</code> and <code>datasets 1.6.0</code>.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">account_id</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;ACCOUNT_ID</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;set-$ACCOUNT_ID-in-environment&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;REGION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;set-$REGION-in-environment&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nt">base_framework</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;BASE_FRAMEWORK</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytorch</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;FRAMEWORK</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="s">&quot;huggingface_&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*BASE_FRAMEWORK</span><span class="p p-Indicator">]</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.6.0</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="nt">short_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;SHORT_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.6</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="nt">repository_info</span><span class="p">:</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">  </span><span class="nt">training_repository</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;TRAINING_REPOSITORY</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="nt">image_type</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;TRAINING_IMAGE_TYPE</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">training</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="s">&quot;huggingface/&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*BASE_FRAMEWORK</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*TRAINING_IMAGE_TYPE</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="nt">repository_name</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;REPOSITORY_NAME</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;pr&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;huggingface&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*BASE_FRAMEWORK</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*TRAINING_IMAGE_TYPE</span><span class="p p-Indicator">]</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;REPOSITORY</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">*ACCOUNT_ID</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">.dkr.ecr.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*REGION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">.amazonaws.com/</span><span class="p p-Indicator">,</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">      </span><span class="nv">*REPOSITORY_NAME</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="nt">images</span><span class="p">:</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">  </span><span class="nt">BuildHuggingFacePytorchGpuPy37Cu110TrainingDockerImage</span><span class="p">:</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*TRAINING_REPOSITORY</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;HUGGINGFACE_PYTORCH_GPU_TRAINING_PY3</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="nt">image_size_baseline</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;IMAGE_SIZE_BASELINE</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15000</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">    </span><span class="nt">device_type</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;DEVICE_TYPE</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpu</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">    </span><span class="nt">python_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;DOCKER_PYTHON_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">py3</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">    </span><span class="nt">tag_python_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;TAG_PYTHON_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">py36</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">    </span><span class="nt">cuda_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;CUDA_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cu110</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">    </span><span class="nt">os_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;OS_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu18.04</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">    </span><span class="nt">transformers_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;TRANSFORMERS_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.5.0</span><span class="w"> </span><span class="c1"># this was adjusted from 4.4.2 to 4.5.0</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">    </span><span class="nt">datasets_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;DATASETS_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.6.0</span><span class="w"> </span><span class="c1"># this was adjusted from 1.5.0 to 1.6.0</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">*VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;transformers&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*TRANSFORMERS_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*DEVICE_TYPE</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*TAG_PYTHON_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">      </span><span class="nv">*CUDA_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*OS_VERSION</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">    </span><span class="nt">docker_file</span><span class="p">:</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">docker/</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*SHORT_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">/</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*DOCKER_PYTHON_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">/</span><span class="p p-Indicator">,</span><span class="w"> </span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">      </span><span class="nv">*CUDA_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">/Dockerfile.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*DEVICE_TYPE</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span></code></pre></div>
2. In the PR comment describe what test, we ran and with which package versions. Here you can copy the table from <a href="#current-tests">Current Tests</a>. </p>
<ol>
<li>In the PR comment describe what test we ran and with which framework versions. Here you can copy the table from <a href="#current-tests">Current Tests</a>. You can take a look at this <a href="https://github.com/aws/deep-learning-containers/pull/1016">PR</a>, which information are needed. </li>
</ol>
<h2 id="test-case-2-releasing-a-new-aws-framework-dlc">Test Case 2: Releasing a New AWS Framework DLC</h2>
<h2 id="execute-tests">Execute Tests</h2>
<h3 id="requirements">Requirements:</h3>
<p>AWS is going to release new DLCs for PyTorch. The Tests should run on the new framework versions with current <code>transformers</code> release to validate the new framework release is compatible with the <code>transformers</code> version. To run these tests you need credentials for the HF SageMaker AWS Account. You can ask @philschmid or @n1t0 to get access. AWS will notify us with a new issue in the repository pointing to their framework upgrade PR.</p>
<h3 id="run-tests_1">Run Tests:</h3>
<p>Before we can run the tests we need to adjust the <code>requirements.txt</code> for Pytorch under <code>/tests/sagemaker/scripts/pytorch</code>. We add the new framework version to it.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nv">torch</span><span class="o">==</span><span class="m">1</span>.8.1<span class="w"> </span><span class="c1"># for pytorch</span>
</span></code></pre></div>
<p>After we adjusted the <code>requirements.txt</code> we can run Amazon SageMaker tests with. </p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nv">AWS_PROFILE</span><span class="o">=</span>&lt;enter-your-profile&gt;<span class="w"> </span>make<span class="w"> </span>test-sagemaker
</span></code></pre></div>
These tests take around 10-15 minutes to finish. Preferably make a screenshot of the successfully ran tests.</p>
<h3 id="after-successful-tests">After successful Tests:</h3>
<p>After we have successfully run tests for the new framework version we need to create a PR at the <a href="https://github.com/aws/deep-learning-containers">Deep Learning Container Repository</a>.</p>
<p><strong>Creating the update PR:</strong></p>
<ol>
<li>Create a new <code>buildspec.yaml</code> config for <a href="https://github.com/aws/deep-learning-containers/tree/master/huggingface/pytorch">PyTorch</a> and rename the old <code>buildspec.yaml</code> to <code>buildespec-x.x.x</code>, where <code>x.x.x</code> is the base framework version, e.g. if pytorch 1.6.0 is the latest version in <code>buildspec.yaml</code> the file should be renamed to <code>buildspec-yaml-1-6.yaml</code>.</li>
</ol>
<p>To create the new <code>buildspec.yaml</code> we need to adjust  the <code>version</code> and the <code>short_version</code>. Example for upgrading to <code>pytorch 1.7.1</code>. </p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">account_id</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;ACCOUNT_ID</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;set-$ACCOUNT_ID-in-environment&gt;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;REGION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;set-$REGION-in-environment&gt;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nt">base_framework</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;BASE_FRAMEWORK</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytorch</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;FRAMEWORK</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="s">&quot;huggingface_&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*BASE_FRAMEWORK</span><span class="p p-Indicator">]</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.7.1</span><span class="w"> </span><span class="c1"># this was adjusted from 1.6.0 to 1.7.1</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="nt">short_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;SHORT_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.7</span><span class="w"> </span><span class="c1"># this was adjusted from 1.6 to 1.7</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="nt">repository_info</span><span class="p">:</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">  </span><span class="nt">training_repository</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;TRAINING_REPOSITORY</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="nt">image_type</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;TRAINING_IMAGE_TYPE</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">training</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="s">&quot;huggingface/&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*BASE_FRAMEWORK</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*TRAINING_IMAGE_TYPE</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="nt">repository_name</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;REPOSITORY_NAME</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;pr&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;huggingface&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*BASE_FRAMEWORK</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*TRAINING_IMAGE_TYPE</span><span class="p p-Indicator">]</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;REPOSITORY</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">*ACCOUNT_ID</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">.dkr.ecr.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*REGION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">.amazonaws.com/</span><span class="p p-Indicator">,</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">      </span><span class="nv">*REPOSITORY_NAME</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="nt">images</span><span class="p">:</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">  </span><span class="nt">BuildHuggingFacePytorchGpuPy37Cu110TrainingDockerImage</span><span class="p">:</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">    </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*TRAINING_REPOSITORY</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;HUGGINGFACE_PYTORCH_GPU_TRAINING_PY3</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">    </span><span class="nt">image_size_baseline</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;IMAGE_SIZE_BASELINE</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15000</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">    </span><span class="nt">device_type</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;DEVICE_TYPE</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpu</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">    </span><span class="nt">python_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;DOCKER_PYTHON_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">py3</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">    </span><span class="nt">tag_python_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;TAG_PYTHON_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">py36</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">    </span><span class="nt">cuda_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;CUDA_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cu110</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="w">    </span><span class="nt">os_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;OS_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu18.04</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w">    </span><span class="nt">transformers_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;TRANSFORMERS_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.4.2</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w">    </span><span class="nt">datasets_version</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;DATASETS_VERSION</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.5.0</span>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">*VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;transformers&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*TRANSFORMERS_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*DEVICE_TYPE</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*TAG_PYTHON_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">      </span><span class="nv">*CUDA_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*OS_VERSION</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w">    </span><span class="nt">docker_file</span><span class="p">:</span><span class="w"> </span><span class="kt">!join</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">docker/</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*SHORT_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">/</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*DOCKER_PYTHON_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">/</span><span class="p p-Indicator">,</span><span class="w"> </span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="w">      </span><span class="nv">*CUDA_VERSION</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">/Dockerfile.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">*DEVICE_TYPE</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span></code></pre></div>
2. In the PR comment describe what test we ran and with which framework versions. Here you can copy the table from <a href="#current-tests">Current Tests</a>. You can take a look at this <a href="https://github.com/aws/deep-learning-containers/pull/1025">PR</a>, which information are needed.</p>
<h2 id="current-tests">Current Tests</h2>
<table>
<thead>
<tr>
<th>ID</th>
<th>Description</th>
<th>Platform</th>
<th>#GPUs</th>
<th>Collected &amp; evaluated metrics</th>
</tr>
</thead>
<tbody>
<tr>
<td>pytorch-transformers-test-single</td>
<td>test bert finetuning using BERT fromtransformerlib+PT</td>
<td>SageMaker createTrainingJob</td>
<td>1</td>
<td>train_runtime, eval_accuracy &amp; eval_loss</td>
</tr>
<tr>
<td>pytorch-transformers-test-2-ddp</td>
<td>test bert finetuning using BERT from transformer lib+ PT DPP</td>
<td>SageMaker createTrainingJob</td>
<td>16</td>
<td>train_runtime, eval_accuracy &amp; eval_loss</td>
</tr>
<tr>
<td>pytorch-transformers-test-2-smd</td>
<td>test bert finetuning using BERT from transformer lib+ PT SM DDP</td>
<td>SageMaker createTrainingJob</td>
<td>16</td>
<td>train_runtime, eval_accuracy &amp; eval_loss</td>
</tr>
<tr>
<td>pytorch-transformers-test-1-smp</td>
<td>test roberta finetuning using BERT from transformer lib+ PT SM MP</td>
<td>SageMaker createTrainingJob</td>
<td>8</td>
<td>train_runtime, eval_accuracy &amp; eval_loss</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "content.tabs.link", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>